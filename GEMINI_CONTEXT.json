{
  "project_name": "CNA Summer Project",
  "meta": {
    "description": "This file serves as the ground truth and context for the Gemini AI assistant. It outlines the project architecture, commands, and a log of significant changes.",
    "directive": "As the Gemini assistant, you MUST keep this file updated. Every significant change to the codebase, such as refactoring, adding features, or fixing bugs, MUST be logged in the 'change_log' section. This log is crucial for maintaining context across sessions."
  },
  "architecture_overview": {
    "type": "monorepo",
    "frontend": {
      "path": "CNA_APP/",
      "technologies": ["React", "Vite", "react-router-dom", "Custom AuthContext", "Axios", "CSS", "ESLint"]
    },
    "backend": {
      "path": "backend/",
      "technologies": ["Node.js", "Express", "MongoDB (Mongoose)", "dotenv", "jsonwebtoken", "cookie-parser", "google-auth-library", "cors", "@google/generative-ai", "node-fetch"],
      "authentication": {
        "method": "Google OAuth 2.0 (Cookie-based session)",
        "cookie_details": "HttpOnly, Secure, SameSite=lax cookie named 'authToken'",
        "standard_login_status": "Not implemented (forms present in UI, no backend logic)",
        "user_model_fields": ["googleId", "email", "name", "picture", "password", "refreshToken", "authMethod", "isVerified", "role", "lastLogin", "createdAt"]
      }
    }
  },
  "development_commands": {
    "frontend_dev": "cd CNA_APP && npm run dev",
    "backend_dev": "cd backend && npm run dev",
    "start_all": "npm run start:all"
  },
  "operating_systems": [
    {
      "name": "win32",
      "commands_allowed": [
        "dir", "cd", "mkdir", "rmdir /s /q", "copy", "move", "del", "type", "echo", "tasklist", "taskkill /F /PID",
        "npm", "node", "git", "start_dev.bat"
      ]
    },
    {
      "name": "linux",
      "commands_allowed": [
        "ls", "cd", "mkdir", "rm -rf", "cp", "mv", "cat", "echo", "ps aux", "kill -9",
        "npm", "node", "git"
      ]
    },
    {
      "name": "darwin",
      "commands_allowed": [
        "ls", "cd", "mkdir", "rm -rf", "cp", "mv", "cat", "echo", "ps aux", "kill -9",
        "npm", "node", "git"
      ]
    }
  ],
  "context_file": "GEMINI_CONTEXT.json",
  "change_log": [
    {
      "date": "2025-07-14",
      "author": "Gemini",
      "summary": "Refactored authentication logic into modular utilities.",
      "details": {
        "description": "Extracted JWT creation, JWT verification, and cookie handling from middleware and route files into dedicated utility modules within a new 'backend/utils' directory. This improves code organization, reduces duplication, and centralizes key authentication logic.",
        "files_created": [
          "backend/utils/createToken.js",
          "backend/utils/verifyToken.js",
          "backend/utils/cookieUtils.js",
          "backend/utils/googleAuth.js"
        ],
        "files_modified": [
          "backend/middleware/authMiddleware.js",
          "backend/routes/oauth.js"
        ]
      }
    }
  ]
}
}